<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A webpage dedicated to the developer team at Ryalto">
    <meta name="author" content="Sergios Papastergiou">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@200;400;500;600&display=swap" rel="stylesheet">

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" sizes="16x16" href="../assets/images/favicon/favicon-16x16.png">
    <link rel="icon" sizes="32x32" href="../assets/images/favicon/favicon-32x32.png">
    <link rel="icon" sizes="512x512" href="../assets/images/favicon/facicon-512x512.png">

    <!-- Lottie Animation -->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <!-- favicon here-->
    <script src="https://kit.fontawesome.com/0d939d98c3.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../assets/css/style.css" type="text/css">
    <title>Ryalto Developer Page</title>
</head>

<body>
    <!-- Header -->
    <header class="container-fluid">
        <div class="row">
            <div class="col-12 col-sm-4 offset-sm-4 text-center">
                <a href="../index.html">
                    <img src="../assets/images/logos-and-icons/ryalto-logo-lg.png" width="200" height="75.31"
                        alt="ryalto-logo" loading="lazy">
                </a>
            </div>
            <div class="d-none d-sm-inline-block col-4 text-sm-right">
                <ul class="list-inline">
                    <li class="list-inline-item">
                        <a class="social" href="#">
                            <i class="fa-solid fa-globe fa-bounce" style="--fa-animation-iteration-count: 3;"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="social" href="#">
                            <i class="fa-brands fa-github fa-bounce" style="--fa-animation-iteration-count: 3;"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="social" href="#">
                            <i class="fa-brands fa-twitter fa-bounce" style="--fa-animation-iteration-count: 3;"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="social" href="#">
                            <i class="fa-brands fa-linkedin fa-bounce" style="--fa-animation-iteration-count: 3;"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <nav class="navbar navbar-expand">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="../blogs-page.html">Blog <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Meet the Team</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Careers</a>
                </li>

            </ul>
        </nav>
    </header>

    <!-- Lottie Animation -->
    <div class="lottie-bg">
        <lottie-player class="lottie-animation"
            src="https://lottie.host/b6ae2926-020e-4c07-aa1c-4b79a653a491/wKjF4OiRZW.json" background="transparent"
            speed="1" loop autoplay></lottie-player>
    </div>

    <!-- Blog Full -->
    <article class="blog-full container-fluid">
        <div class="row">
            <div class="col-12 text-center gen-text">
                <h3>Users, Organisations and Admin Authorisation at Ryalto</h3>
            </div>
        </div>
        <div class="row author-info pt-2 pb-2 rounded">
            <div class="col-6">
                <img class="author-photo float-right mt-0" src="../assets/images/team/team-member-4.webp" alt="team-member-4">
            </div>
            <div class="col-6 gen-text">
                <h5>Phil</h5>
                <p>14 June 2022</p>
                <ul class="list-inline">
                    <li class="list-inline-item">
                        <a class="social" href="#">
                            <i class="fa-brands fa-github"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="social" href="#">
                            <i class="fa-brands fa-linkedin"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="social" href="#">
                            <i class="fa-solid fa-envelope"></i>
                        </a>
                    </li>
                </ul>
            
            </div>
        </div>
        <div class="row">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-justify gen-text">
                        <p>Here at Ryalto, we’re working on a better way to manage the relationship between users and organisations.</p>
                        <h5>The old way</h5>
                        <p>Previously, a user belonged to an organisation and an organisation had many users. We also had a separate model for
                        admins, which also belong to an organisation. The actual implementation was a good deal more complicated than that, but
                        I’m not going down that rabbit hole today!</p>
                        <p>We had a requirement from a client that users needed to be able to switch between organisations. We look the
                        user-organisation relationship from many one-to-many to many-to-many. The initial implementation of this was a semantic
                        link between user accounts to preserve the hierarchy. A user switched organisations by switching user accounts.</p>
                        <h5>A new way for Users <—> Organisations</h5>
                        <p>When thinking about our rebuild I wanted to model our system more closely to the real world. A user has many
                        organisations and an organisation has many users. This was done through a user-organisation model.</p>
                        <pre class="blog-code-snippet" tabindex="0"><code><span class="token-ruby-comment"># app/models/user.rb</span>
                        <span class="token-ruby-comment"># User Model</span>
                        <span class="token-ruby-keyword">class</span> User <span class="token-ruby-operator">&lt;</span> ApplicationRecord
                            has_many <span class="token-ruby-symbol">:user_organisations</span>
                            accepts_nested_attributes_for <span class="token-ruby-symbol">:user_organisations</span><span class="token-ruby-punctuation">,</span> <span class="token-ruby-symbol">allow_destroy</span><span class="token-ruby-operator">:</span> <span class="token-ruby-boolean">true</span>
                            has_many <span class="token-ruby-symbol">:organisations</span><span class="token-ruby-punctuation">,</span> <span class="token-ruby-symbol">through</span><span class="token-ruby-operator">:</span> <span class="token-ruby-symbol">:user_organisations</span>
                        <span class="token-ruby-keyword">end</span>
                        
                        <span class="token-ruby-comment"># app/models/organisation.rb</span>
                        <span class="token-ruby-comment"># Organisation Model</span>
                        <span class="token-ruby-keyword">class</span> <span class="token-ruby-class-name">Organisation</span> <span class="token-ruby-operator">&lt;</span> ApplicationRecord
                            has_many <span class="token-ruby-symbol">:user_organisations</span>
                            has_many <span class="token-ruby-symbol">:users</span><span class="token-ruby-punctuation">,</span> <span class="token-ruby-symbol">through</span><span class="token-ruby-operator">:</span> <span class="token-ruby-symbol">:user_organisations</span>
                        <span class="token-ruby-keyword">end</span>
                        
                        <span class="token-ruby-comment"># app/models/user_organisation.rb</span>
                        <span class="token-ruby-comment"># UserOrganisation Model</span>
                        <span class="token-ruby-comment"># This is the model which connects users to organisations.</span>
                        <span class="token-ruby-keyword">class</span> <span class="token-ruby-class-name">UserOrganisation</span> <span class="token-ruby-operator">&lt;</span> ApplicationRecord
                            belongs_to <span class="token-ruby-symbol">:user</span>
                            belongs_to <span class="token-ruby-symbol">:organisation</span>
                        <span class="token-ruby-keyword">end</span>
                        </code></pre>
                        
                    </div>
                </div>
            </div>
        </div>
    </article>

    <!-- Previous/Next Buttons -->
    <div class="container mt-5">
        <div class="row">
            <div class="col-6 d-none text-center ">
                <button class="btn home-page-btn">Previous</button>
            </div>
            <div class="col-6 text-center">
                <button class="btn home-page-btn">Next</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="container-fluid bg-color-footer mt-5">
        <div class="row">
            <div class="col text-center">
                <a href="index.html">
                    <img src="../assets/images/logos-and-icons/logo-small.png" alt="ryalto-logo-small" width="100"
                        height="100">
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col text-center gen-text">
                <p>© Copyright 2023</p>
            </div>
        </div>
    </footer>
</body>

</html>